function Notification(n,t){this.permission="granted",desktop.sendMessage(n,t.body)}Notification.permission="granted",Notification.requestPermission=function(n){void 0!=typeof n&&n()};var ScudCloud={init:function(){document.onpaste=function(){desktop.pasted(!1)},TS.ui.growls.getPermissionLevel=function(){return"granted"},TS.ui.growls.show=function(n,t,e,o,i,d,u){new Notification(n,{body:e,icon:TS.boot_data.img.app_icon,tag:"tag_"+(u?u.id||u.ts||(new Date).getTime():(new Date).getTime())})},TS.ms.connected_sig.add(function(){desktop.enableMenus(!0)}),TS.ms.disconnected_sig.add(function(){desktop.enableMenus(!1)}),ScudCloud.watch()},count:function(){var n=0;$("span.unread_highlight").not(".hidden").each(function(){n+=new Number($(this).text().replace("+",""))}),desktop.count(n.toString())},listChannels:function(){return TS.channels.getUnarchivedChannelsForUser()},quicklist:function(){desktop.quicklist(ScudCloud.listChannels())},watch:function(){setInterval(function(){ScudCloud.count()},1e3)},join:function(n){return TS.channels.join(n)},setClipboard:function(n){TS.client.ui.file_pasted_sig.dispatch(n,TS.model.shift_key_pressed)},preferences:function(){return TS.ui.prefs_dialog.start()},addTeam:function(){document.location=TS.boot_data.signin_url},logout:function(){document.location=TS.boot_data.logout_url},help:function(){return TS.help_dialog.start()},isConnected:function(){return"undefined"!=typeof TS&&"undefined"!=typeof TS.model&&TS.model.ms_connected}};"undefined"!=typeof TS?(ScudCloud.init(),ScudCloud.listChannels()):new Array;
