var ScudCloud={overrideNotifications:function(){TS.ui.growls.no_notifications=!1,TS.ui.growls.checkPermission=function(){return!0},TS.ui.growls.getPermissionLevel=function(){return"granted"},TS.ui.growls.show=function(n,e,t){desktop.sendMessage(n,t)},TS.ui.banner.close()},count:function(){var n=0;$("span.unread_highlight").not(".hidden").each(function(){n+=new Number($(this).text().replace("+",""))}),desktop.count(n.toString())},getCurrentTeam:function(){for(var n=TS.boot_data.team_url,e=TS.getAllTeams(),t=0;t<e.length;t++)if(e[t].team_url==n)return e[t].id;return""},listChannels:function(){return TS.channels.getUnarchivedChannelsForUser()},listTeams:function(){return TS.getAllTeams()},quicklist:function(){desktop.quicklist(ScudCloud.listChannels())},join:function(n){return TS.channels.join(n)},setClipboard:function(n){TS.client.ui.file_pasted_sig.dispatch(n,TS.model.shift_key_pressed)},preferences:function(){return TS.ui.prefs_dialog.start()},addTeam:function(){document.location=TS.boot_data.signin_url},logout:function(){document.location=TS.boot_data.logout_url},help:function(){return TS.help_dialog.start()},isConnected:function(){return"undefined"!=typeof TS&&"undefined"!=typeof TS.model&&TS.model.ms_connected}},boot_data={};"undefined"!=typeof TS?(document.onpaste=function(){desktop.pasted(!1)},ScudCloud.overrideNotifications(),TS.ms.connected_sig.add(function(){desktop.enableMenus(!0)}),TS.ms.disconnected_sig.add(function(){desktop.enableMenus(!1)}),ScudCloud.onDOMReady=TS.onDOMReady,TS.onDOMReady=function(){ScudCloud.overrideNotifications(),ScudCloud.onDOMReady()},setInterval(function(){ScudCloud.count()},1e3),boot_data.channels=ScudCloud.listChannels(),boot_data.teams=ScudCloud.listTeams()):(boot_data.channels=new Array,boot_data.teams=new Array);boot_data
